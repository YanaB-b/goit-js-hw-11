{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,0BAOA,MAAMC,EAAM,CACVC,KAAMC,SAASC,cAAc,gBAC7BC,QAASF,SAASC,cAAc,aAK5BE,EAAW,IAAIC,EAAAR,GAAJ,CAAmB,cAC9BS,EAAoB,IAAI,EAAAC,EAAAC,SACxBC,EAAc,IChBL,MAMfC,UAAUC,GACN,OAAOV,SAASC,cAAcS,E,CAElCC,OACIC,KAAKC,OAAOC,UAAUC,IAAI,S,CAE9BC,OACIJ,KAAKC,OAAOC,UAAUG,OAAO,S,CAEjCC,UACIN,KAAKC,OAAOK,SAAU,EACtBN,KAAKC,OAAOM,YAAc,Y,CAE9BC,SACIR,KAAKC,OAAOK,SAAU,EACtBN,KAAKC,OAAOM,YAAc,W,CApB1BE,aAAaX,SAACA,EAAQY,SAAEA,IACpBV,KAAKC,OAASD,KAAKH,UAAUC,GAC1BY,EAAUV,KAAKD,OACbC,KAAKI,M,GDYkB,CAClCN,SAAU,aACVY,UAAU,IAiBZ,SAASC,IAIL,OAHAf,EAAYU,UACZV,EAAYQ,OAELX,EACJmB,aACAC,MAAKC,IA0DZ,SAAsBA,GACW,IAA3BrB,EAAkBsB,KACxBvB,EAAAwB,GAASC,OAAOC,QAAQ,oBAAoBJ,EAAIK,qBACvCL,EAAIM,KAAKC,OAAS5B,EAAkB6B,UAC3C1B,EAAYG,OACZP,EAAAwB,GAASC,OAAOM,QACd,8D,CA/DIC,CAAaV,GAEP5B,EAAIkC,QAEXP,KAAKY,GACLC,MAAMC,GACNC,SAAQ,KACP1C,EAAIC,KAAK0C,QACTjC,EAAYY,QAAQ,G,CAI5B,SAASiB,EAAcK,GACnB,IAAIC,EAAM,GACVA,EAAMD,EAAOE,KAAI,EAACC,aAACA,EAAYC,cAAEA,EAAaC,KAAEA,EAAIC,MAAEA,EAAKC,MAAEA,EAAKC,SAAEA,EAAQC,UAAEA,KACrE,uCACuBL,uEAGLD,WAAsBE,2HAIzCC,qEAGAC,6EAIAC,8EAIAC,yCAMPC,KAAK,IAGNtD,EAAII,QAAQmD,mBAAmB,YAAaV,GAC5CxC,EAASmD,S,CAMb,SAASf,EAAQgB,GACbC,QAAQC,IAAKF,GAEbnD,EAAAwB,GAASC,OAAO6B,QAAQ,4EACxBlD,EAAYG,M,CA3EhBb,EAAIC,KAAK4D,iBAAiB,UAG1B,SAAkBC,GACfA,EAAEC,iBAEFC,iBAAiBC,EAAIH,EAAEI,cAAcC,SAASC,YAAYC,MAAMC,OAEhE5D,EAAYQ,OACZX,EAAkBgE,YA4DjBvE,EAAII,QAAQoE,UAAY,GA1DzB/C,G,IAVHf,EAAYK,OAAO8C,iBAAiB,QAASpC","sources":["src/01-index.js","src/components/loadMoreBtn.js"],"sourcesContent":["import simpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport Notiflix from \"notiflix\";\nimport GalleryApiService from \"./NewsApiService\";\nimport LoadMoreBtn from \"./components/loadMoreBtn\";\n\nconst ref = {\n  form: document.querySelector(\".search-form\"),\n  gallery: document.querySelector(\".gallery\"),\n\n}; \n \n\nconst lightbox = new simpleLightbox('.gallery a');\nconst galleryApiService = new GalleryApiService();\nconst loadMoreBtn = new LoadMoreBtn({\n  selector: \".load-more\",\n  isHidden: true,\n});\n\nref.form.addEventListener(\"submit\", onSubmit);\nloadMoreBtn.button.addEventListener(\"click\", fetchArticles);\n\nfunction onSubmit(e) {\n   e.preventDefault();\n   \n   galeryApiService.q = e.currentTarget.elements.searchQuery.value.trim();\n\n   loadMoreBtn.show();\n   galleryApiService.resetPage();\n   clearList();\n   fetchArticles();\n\n}\nfunction fetchArticles() {\n    loadMoreBtn.disable();\n    loadMoreBtn.show();\n\n    return galleryApiService\n      .getImagesy()\n      .then(res => {\n        notification(res);\n     \n       return ref.hits\n      })\n      .then(appendGallery)\n      .catch(OnError)\n      .finally(() => {\n        ref.form.reset();\n        loadMoreBtn.enable();\n\n      });\n}\nfunction appendGallery(markup) {\n    let img = '';\n    img = markup.map(({webformatURL, largeImageURL, tags, likes, views, comments, downloads}) =>\n    { return `\n    <a class=\"gallery-item\" href=\"${largeImageURL}\">\n    <div class=\"photo-card\">\n  \n    <img class=\"images\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" width=\"280\" height=\"180\"/>\n    \n<div class=\"info\">\n  <p class=\"info-item\"> <b>Likes</b>\n    <span>${likes}</span>\n  </p>\n  <p class=\"info-item\"><b>Views</b> \n    <span>${views}</span>\n  </p>\n  <p class=\"info-item\">\n    <b>Comments</b>\n    <span>${comments}</span>\n  </p>\n  <p class=\"info-item\">\n    <b>Downloads</b>\n    <span>${downloads}</span>\n  </p>\n</div>\n</div></a>`;\n    }\n    )\n    .join('');\n\n\n    ref.gallery.insertAdjacentHTML(\"beforeend\", img);\n    lightbox.refresh();\n  }\n  \n  function clearList() {\n    ref.gallery.innerHTML = \"\";\n  }\nfunction OnError(err) {\n    console.log (err);\n  \n    Notiflix.Notify.failure('Sorry, there are no images matching your search query. Please try again.');\n    loadMoreBtn.hide();\n}\n\nfunction notification(res) {\n  if (galleryApiService.page === 2)\nNotiflix.Notify.success(`Hooray! We found ${res.totalHits} images.`);\nelse if (res.hits.length < galleryApiService.perPage) {\n  loadMoreBtn.hide();\n  Notiflix.Notify.warning(\n    \"We're sorry, but you've reached the end of search results.\"\n  );\n}  \n}\n\n","export default class LoadMoreBtn{\n    constructor ({selector, isHidden}){\n        this.button = this.getButton(selector);\n        if(isHidden) this.hide();\n        else this.show();\n    }\ngetButton(selector) {\n    return document.querySelector(selector);\n}\nhide() {\n    this.button.classList.add('hidden');\n}\nshow() {\n    this.button.classList.remove('hidden');\n}\ndisable() {\n    this.button.disable = true;\n    this.button.textContent = 'Loadind...';\n}\nenable() {\n    this.button.disable = false;\n    this.button.textContent = 'Load more';\n\n}\n}"],"names":["$fZKcF","parcelRequire","$75c9065a99106def$var$ref","form","document","querySelector","gallery","$75c9065a99106def$var$lightbox","$parcel$interopDefault","$75c9065a99106def$var$galleryApiService","$bUYGH","default","$75c9065a99106def$var$loadMoreBtn","getButton","selector","hide","this","button","classList","add","show","remove","disable","textContent","enable","constructor","isHidden","$75c9065a99106def$var$fetchArticles","getImagesy","then","res","page","$7Y9D8","Notify","success","totalHits","hits","length","perPage","warning","$75c9065a99106def$var$notification","$75c9065a99106def$var$appendGallery","catch","$75c9065a99106def$var$OnError","finally","reset","markup","img","map","webformatURL","largeImageURL","tags","likes","views","comments","downloads","join","insertAdjacentHTML","refresh","err","console","log","failure","addEventListener","e","preventDefault","galeryApiService","q","currentTarget","elements","searchQuery","value","trim","resetPage","innerHTML"],"version":3,"file":"01-loadMoreBtn.c36824b3.js.map"}