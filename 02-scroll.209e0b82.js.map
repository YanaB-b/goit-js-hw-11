{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,0BAQMC,EAAM,CACRC,KAAMC,SAASC,cAAc,gBAC7BC,QAASF,SAASC,cAAc,YAChCE,MAAOH,SAASC,cAAc,WAI1BG,EAAW,IAAIC,EAAAT,GAAJ,CAAmB,cAC9BU,EAAoB,IAAI,EAAAC,EAAAC,SAe/B,SAASC,IAEL,OAAOH,EACJI,aACAC,MAAK,SAAAC,GAGL,OAFAC,EAASC,QAAQhB,EAAIK,OAsD7B,SAAsBS,GACW,IAA3BN,EAAkBS,KACxBV,EAAAW,GAASC,OAAOC,QAAQ,oBAAkCC,OAAdP,EAAIQ,UAAU,aACjDR,EAAIS,KAAKC,OAAShB,EAAkBiB,UAC3CV,EAASW,UAAU1B,EAAIK,OACvBE,EAAAW,GAASC,OAAOQ,QACd,8D,CA3DIC,CAAad,GACNA,EAAIS,I,IAEXV,KAAKgB,GACLC,MAAMC,GACNC,SAAQ,WACPhC,EAAIC,KAAKgC,O,IAMjB,SAASJ,EAAcK,GACpB,IAAIC,EACJA,EAAMD,EAAOE,KAAI,SAAAC,G,IAAEC,EAAYD,EAAZC,aAAaC,EAAaF,EAAbE,cAAcC,EAAIH,EAAJG,KAAKC,EAAKJ,EAALI,MAAMC,EAAKL,EAALK,MAAMC,EAAQN,EAARM,SAASC,EAASP,EAATO,UACtE,MAAO,iCAGkBvB,OAHekB,EAAc,uEAGPlB,OAAtBiB,EAAa,WAIhCjB,OAJyCmB,EAAK,2HAO9CnB,OAHAoB,EAAM,qEAONpB,OAJAqB,EAAM,6EAQNrB,OAJAsB,EAAS,8EAICtB,OAAVuB,EAAU,sC,IAKhBC,KAAK,IAGP7C,EAAII,QAAQ0C,mBAAmB,YAAaX,GAC5C7B,EAASyC,S,CAMb,SAAShB,EAAQiB,GACbC,QAAQC,IAAKF,GACbjC,EAASW,UAAU1B,EAAIK,OACvBE,EAAAW,GAASC,OAAOgC,QAAQ,2E,CAtE1BnD,EAAIC,KAAKmD,iBAAiB,UAE1B,SAAkBC,GAChBA,EAAEC,iBAEH9C,EAAkB+C,EAAIF,EAAEG,cAAcC,SAASC,YAAYC,MAAMC,OAGhEpD,EAAkBqD,YAyDlB7D,EAAII,QAAQ0D,UAAY,GAvDxBnD,G,IAwEJ,IAKMI,EAAW,IAAIgD,sBAErB,SAAkBN,GACdR,QAAQC,IAAIO,GACZO,SAASC,SAAQ,SAAAC,GACbjB,QAAQC,IAAIgB,EAAQC,gBAChBD,EAAQC,gBACRxD,G,MAZG,CACfyD,KAAM,KACNC,WAAY,S","sources":["src/02-index.js"],"sourcesContent":["import simpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport Notiflix from \"notiflix\";\nimport GalleryApiService from \"./NewsApiService\";\n\n\n\nconst ref = {\n    form: document.querySelector(\".search-form\"),\n    gallery: document.querySelector(\".gallery\"),\n    guard: document.querySelector('.guard'),\n  \n  };\n   \n  const lightbox = new simpleLightbox('.gallery a');\n  const galleryApiService = new GalleryApiService();\n\n  ref.form.addEventListener(\"submit\", onSubmit);\n\n  function onSubmit(e) {\n    e.preventDefault();\n    \n   galleryApiService.q = e.currentTarget.elements.searchQuery.value.trim();\n \n\n    galleryApiService.resetPage();\n    clearList();\n    fetchArticles();\n \n }\n function fetchArticles() {\n \n     return galleryApiService\n       .getImagesy()\n       .then(res => {\n        observer.observe(ref.guard);\n        notification(res);\n        return res.hits;\n       })\n       .then(appendGallery)\n       .catch(onError)\n       .finally(() => {\n         ref.form.reset();\n        \n \n       });\n }\n\n function appendGallery(markup) {\n    let img = '';\n    img = markup.map(({webformatURL,largeImageURL,tags,likes,views,comments,downloads}) =>\n    { return `<a class=\"gallery-item\" href=\"${largeImageURL}\">\n    <div class=\"photo-card\">\n  \n    <img class=\"images\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" width=\"280\" height=\"180\"/>\n    \n<div class=\"info\">\n  <p class=\"info-item\"> <b>Likes</b>\n    <span>${likes}</span>\n  </p>\n  <p class=\"info-item\"><b>Views</b> \n    <span>${views}</span>\n  </p>\n  <p class=\"info-item\">\n    <b>Comments</b>\n    <span>${comments}</span>\n  </p>\n  <p class=\"info-item\">\n    <b>Downloads</b>\n    <span>${downloads}</span>\n  </p>\n</div>\n</div></a>`;\n    }\n    ).join('');\n\n\n    ref.gallery.insertAdjacentHTML(\"beforeend\", img);\n    lightbox.refresh();\n  }\n\n  function clearList() {\n    ref.gallery.innerHTML = \"\";\n  }\nfunction onError(err) {\n    console.log (err);\n    observer.unobserve(ref.guard);\n    Notiflix.Notify.failure('Sorry, there are no images matching your search query. Please try again.');\n}\nfunction notification(res) {\n  if (galleryApiService.page === 2)\nNotiflix.Notify.success(`Hooray! We found ${res.totalHits} images.`);\nelse if (res.hits.length < galleryApiService.perPage) {\n  observer.unobserve(ref.guard);\n  Notiflix.Notify.warning(\n    \"We're sorry, but you've reached the end of search results.\"\n  );\n} \n}\nconst scroll = {\nroot: null,\nrootHeight: '300px',\n\n};\nconst observer = new IntersectionObserver(onScroll , scroll);\n\nfunction onScroll(elements) {\n    console.log(elements);\n    enteries.forEach(element => {\n        console.log(element.isIntersecting);\n        if (element.isIntersecting) {\n            fetchArticles()\n        }\n    });\n}\n"],"names":["$5IjG7","parcelRequire","$11e807edb1765eef$var$ref","form","document","querySelector","gallery","guard","$11e807edb1765eef$var$lightbox","$parcel$interopDefault","$11e807edb1765eef$var$galleryApiService","$3Jz39","default","$11e807edb1765eef$var$fetchArticles","getImagesy","then","res","$11e807edb1765eef$var$observer","observe","page","$6JpON","Notify","success","concat","totalHits","hits","length","perPage","unobserve","warning","$11e807edb1765eef$var$notification","$11e807edb1765eef$var$appendGallery","catch","$11e807edb1765eef$var$onError","finally","reset","markup","img","map","param","webformatURL","largeImageURL","tags","likes","views","comments","downloads","join","insertAdjacentHTML","refresh","err","console","log","failure","addEventListener","e","preventDefault","q","currentTarget","elements","searchQuery","value","trim","resetPage","innerHTML","IntersectionObserver","enteries","forEach","element","isIntersecting","root","rootHeight"],"version":3,"file":"02-scroll.209e0b82.js.map"}